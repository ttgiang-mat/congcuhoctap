<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√†m S·ªë L∆∞·ª£ng Gi√°c - L·ªõp 11</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        body { font-family: 'Nunito', sans-serif; }
        
        .drag-item {
            transition: all 0.3s ease;
            cursor: grab;
        }
        
        .drag-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
        
        .drop-zone {
            transition: all 0.3s ease;
            min-height: 60px;
        }
        
        .drop-zone.drag-over {
            background-color: #ddd6fe;
            border-color: #8b5cf6;
            transform: scale(1.02);
        }
        
        .correct-answer {
            animation: bounce 0.6s ease-in-out;
        }
        
        .wrong-answer {
            animation: shake 0.6s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .leaderboard-item {
            transition: all 0.3s ease;
        }
        
        .leaderboard-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .rank-1 { background: linear-gradient(135deg, #ffd700, #ffed4e); }
        .rank-2 { background: linear-gradient(135deg, #c0c0c0, #e5e7eb); }
        .rank-3 { background: linear-gradient(135deg, #cd7f32, #d97706); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-50 to-pink-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-purple-800 mb-2">üìä H√†m S·ªë L∆∞·ª£ng Gi√°c - L·ªõp 11</h1>
            <p class="text-lg text-gray-600">Kh√°m ph√° th·∫ø gi·ªõi h√†m s·ªë l∆∞·ª£ng gi√°c - K·∫øt n·ªëi tri th·ª©c v·ªõi cu·ªôc s·ªëng!</p>
        </div>

        <!-- Game Stats -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center space-x-4">
                    <div class="bg-blue-100 px-4 py-2 rounded-full">
                        <span class="text-blue-800 font-semibold">V√≤ng <span id="currentRound">1</span>/3</span>
                    </div>
                    <div class="bg-green-100 px-4 py-2 rounded-full">
                        <span class="text-green-800 font-semibold">C√¢u <span id="currentQuestion">1</span>/5</span>
                    </div>
                    <div class="bg-purple-100 px-4 py-2 rounded-full">
                        <span class="text-purple-800 font-semibold">‚è±Ô∏è <span id="questionTimer">60</span>s</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-yellow-100 px-4 py-2 rounded-full">
                        <span class="text-yellow-800 font-semibold">ƒêi·ªÉm: <span id="score">0</span></span>
                    </div>
                    <div class="bg-orange-100 px-4 py-2 rounded-full">
                        <span class="text-orange-800 font-semibold">üïê <span id="totalTimer">00:00</span></span>
                    </div>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div id="progressBar" class="progress-bar bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <!-- Game Area -->
        <div id="gameArea" class="bg-white rounded-2xl shadow-lg p-8">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="text-center">
                <div class="text-6xl mb-6">üìä</div>
                <h2 class="text-3xl font-bold text-purple-800 mb-4">Ch√†o m·ª´ng ƒë·∫øn v·ªõi H√†m S·ªë L∆∞·ª£ng Gi√°c!</h2>
                <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
                    Tr√≤ ch∆°i g·ªìm 3 v√≤ng v·ªõi 15 c√¢u h·ªèi v·ªÅ h√†m s·ªë l∆∞·ª£ng gi√°c l·ªõp 11. 
                    Kh√°m ph√° t√≠nh ch·∫•t, ƒë·ªì th·ªã v√† ·ª©ng d·ª•ng c·ªßa c√°c h√†m sin, cos, tan, cot.
                </p>
                
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6 max-w-md mx-auto">
                    <label class="block text-purple-800 font-semibold mb-3">Nh·∫≠p t√™n c·ªßa b·∫°n:</label>
                    <input type="text" id="playerName" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" 
                           class="w-full px-4 py-3 rounded-xl border-2 border-purple-200 focus:border-purple-500 focus:outline-none text-center text-lg font-semibold">
                </div>
                
                <button onclick="startGame()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full font-semibold text-lg hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-300">
                    üöÄ B·∫Øt ƒê·∫ßu H·ªçc
                </button>
                
                <div class="mt-8">
                    <button onclick="showLeaderboard()" class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-full font-semibold hover:from-yellow-600 hover:to-orange-600 transition-all duration-300">
                        üèÜ B·∫£ng X·∫øp H·∫°ng
                    </button>
                </div>
            </div>

            <!-- Question Area -->
            <div id="questionArea" class="hidden">
                <div class="text-center mb-8">
                    <h3 id="questionTitle" class="text-2xl font-bold text-purple-800 mb-4"></h3>
                    <div id="questionContent" class="text-lg text-gray-700"></div>
                </div>

                <!-- Multiple Choice Options -->
                <div id="multipleChoice" class="hidden space-y-4">
                    <div class="grid gap-4">
                        <button class="option-btn bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 rounded-xl p-4 text-left transition-all duration-300 hover:scale-102" onclick="selectAnswer(0)">
                            <span class="font-semibold text-blue-800">A.</span> <span class="ml-2"></span>
                        </button>
                        <button class="option-btn bg-green-50 hover:bg-green-100 border-2 border-green-200 rounded-xl p-4 text-left transition-all duration-300 hover:scale-102" onclick="selectAnswer(1)">
                            <span class="font-semibold text-green-800">B.</span> <span class="ml-2"></span>
                        </button>
                        <button class="option-btn bg-yellow-50 hover:bg-yellow-100 border-2 border-yellow-200 rounded-xl p-4 text-left transition-all duration-300 hover:scale-102" onclick="selectAnswer(2)">
                            <span class="font-semibold text-yellow-800">C.</span> <span class="ml-2"></span>
                        </button>
                        <button class="option-btn bg-pink-50 hover:bg-pink-100 border-2 border-pink-200 rounded-xl p-4 text-left transition-all duration-300 hover:scale-102" onclick="selectAnswer(3)">
                            <span class="font-semibold text-pink-800">D.</span> <span class="ml-2"></span>
                        </button>
                    </div>
                </div>

                <!-- Sorting Game -->
                <div id="sortingGame" class="hidden">
                    <p class="text-center text-gray-600 mb-6">S·∫Øp x·∫øp c√°c b∆∞·ªõc theo th·ª© t·ª± ƒë√∫ng:</p>
                    <div id="sortableItems" class="space-y-3 mb-6"></div>
                    <div class="text-center">
                        <button onclick="checkSortOrder()" class="bg-purple-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-purple-600 transition-all duration-300">
                            Ki·ªÉm Tra Th·ª© T·ª±
                        </button>
                    </div>
                </div>

                <!-- Drag and Drop -->
                <div id="dragDropGame" class="hidden">
                    <p class="text-center text-gray-600 mb-6">K√©o th·∫£ c√°c gi√° tr·ªã v√†o v·ªã tr√≠ ph√π h·ª£p:</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-semibold text-purple-800 mb-4">C√°c gi√° tr·ªã:</h4>
                            <div id="dragItems" class="space-y-3"></div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-purple-800 mb-4">C√¥ng th·ª©c:</h4>
                            <div id="dropZones" class="space-y-4"></div>
                        </div>
                    </div>
                    <div class="text-center mt-6">
                        <button onclick="checkDragDrop()" class="bg-purple-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-purple-600 transition-all duration-300">
                            Ki·ªÉm Tra K·∫øt Qu·∫£
                        </button>
                    </div>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="hidden text-center">
                <div id="resultIcon" class="text-6xl mb-4"></div>
                <h3 id="resultTitle" class="text-2xl font-bold mb-4"></h3>
                <p id="resultMessage" class="text-gray-600 mb-6"></p>
                <button id="nextButton" onclick="nextQuestion()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-full font-semibold hover:from-blue-600 hover:to-purple-600 transition-all duration-300">
                    C√¢u Ti·∫øp Theo
                </button>
            </div>

            <!-- Final Score -->
            <div id="finalScore" class="hidden text-center">
                <div class="text-6xl mb-6">üèÜ</div>
                <h2 class="text-3xl font-bold text-purple-800 mb-4">Ch√∫c M·ª´ng <span id="finalPlayerName"></span>!</h2>
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-6 mb-6">
                    <p class="text-2xl font-bold text-orange-800">ƒêi·ªÉm Cu·ªëi C√πng: <span id="finalScoreValue">0</span>/150</p>
                    <p class="text-lg font-semibold text-blue-800 mt-2">‚è±Ô∏è Th·ªùi gian ho√†n th√†nh: <span id="finalTotalTime">00:00</span></p>
                    <p class="text-md text-gray-600 mt-1">‚ö° Th·ªùi gian trung b√¨nh m·ªói c√¢u: <span id="avgTimePerQuestion">0</span>s</p>
                    <p id="finalMessage" class="text-gray-600 mt-3"></p>
                    <p id="rankMessage" class="text-purple-700 font-semibold mt-3"></p>
                </div>
                <div class="space-y-4">
                    <button onclick="restartGame()" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-full font-semibold text-lg hover:from-green-600 hover:to-blue-600 transform hover:scale-105 transition-all duration-300">
                        üîÑ H·ªçc L·∫°i
                    </button>
                    <button onclick="showLeaderboard()" class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-full font-semibold hover:from-yellow-600 hover:to-orange-600 transition-all duration-300 ml-4">
                        üèÜ Xem B·∫£ng X·∫øp H·∫°ng
                    </button>
                </div>
            </div>

            <!-- Leaderboard -->
            <div id="leaderboard" class="hidden">
                <div class="text-center mb-6">
                    <div class="text-5xl mb-4">üèÜ</div>
                    <h2 class="text-3xl font-bold text-purple-800">B·∫£ng X·∫øp H·∫°ng</h2>
                    <p class="text-gray-600 mt-2">Top h·ªçc sinh xu·∫•t s·∫Øc nh·∫•t</p>
                </div>
                
                <div id="leaderboardList" class="space-y-3 mb-8 max-h-96 overflow-y-auto">
                    <!-- Leaderboard items will be inserted here -->
                </div>
                
                <div class="text-center">
                    <button onclick="hideLeaderboard()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-300">
                        ‚Üê Quay L·∫°i
                    </button>
                    <button onclick="clearLeaderboard()" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold hover:from-red-600 hover:to-pink-600 transition-all duration-300 ml-4">
                        üóëÔ∏è X√≥a B·∫£ng X·∫øp H·∫°ng
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentRound = 1;
        let currentQuestion = 1;
        let score = 0;
        let gameData = [];
        let currentQuestionData = null;
        let playerName = '';
        let usedQuestions = { 1: [], 2: [], 3: [] };
        
        // Timer variables
        let questionStartTime = 0;
        let gameStartTime = 0;
        let totalGameTime = 0;
        let questionTimeLimit = 60;
        let questionTimer = null;
        let totalTimer = null;
        let questionTimeLeft = 60;

        // Timer functions
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function startQuestionTimer() {
            questionTimeLeft = questionTimeLimit;
            questionStartTime = Date.now();
            
            questionTimer = setInterval(() => {
                questionTimeLeft--;
                document.getElementById('questionTimer').textContent = questionTimeLeft;
                
                // Change color when time is running out
                const timerElement = document.getElementById('questionTimer').parentElement;
                if (questionTimeLeft <= 15) {
                    timerElement.className = 'bg-red-100 px-4 py-2 rounded-full animate-pulse';
                    timerElement.querySelector('span').className = 'text-red-800 font-semibold';
                } else if (questionTimeLeft <= 30) {
                    timerElement.className = 'bg-yellow-100 px-4 py-2 rounded-full';
                    timerElement.querySelector('span').className = 'text-yellow-800 font-semibold';
                }
                
                if (questionTimeLeft <= 0) {
                    clearInterval(questionTimer);
                    handleTimeUp();
                }
            }, 1000);
        }
        
        function stopQuestionTimer() {
            if (questionTimer) {
                clearInterval(questionTimer);
                questionTimer = null;
            }
        }
        
        function startTotalTimer() {
            gameStartTime = Date.now();
            totalTimer = setInterval(() => {
                totalGameTime = Math.floor((Date.now() - gameStartTime) / 1000);
                document.getElementById('totalTimer').textContent = formatTime(totalGameTime);
            }, 1000);
        }
        
        function stopTotalTimer() {
            if (totalTimer) {
                clearInterval(totalTimer);
                totalTimer = null;
            }
        }
        
        function handleTimeUp() {
            playWrongSound();
            showResult(false, "H·∫øt th·ªùi gian! ‚è∞", "B·∫°n ƒë√£ kh√¥ng tr·∫£ l·ªùi k·ªãp trong 60 gi√¢y.");
        }

        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }
        
        function playCorrectSound() {
            playSound(523, 0.2); // C5
            setTimeout(() => playSound(659, 0.2), 100); // E5
            setTimeout(() => playSound(784, 0.3), 200); // G5
        }
        
        function playWrongSound() {
            playSound(220, 0.3, 'sawtooth'); // A3
            setTimeout(() => playSound(196, 0.4, 'sawtooth'), 150); // G3
        }
        
        function playClickSound() {
            playSound(800, 0.1, 'square');
        }

        // Game data - H√†m s·ªë l∆∞·ª£ng gi√°c l·ªõp 11 - Ch∆∞∆°ng tr√¨nh 2018
        const questionBank = [
            // Round 1: Multiple Choice - T√≠nh ch·∫•t c∆° b·∫£n c·ªßa h√†m s·ªë l∆∞·ª£ng gi√°c
            {
                type: 'multiple',
                questionSets: [
                    [
                        {
                            question: "T·∫≠p x√°c ƒë·ªãnh c·ªßa h√†m s·ªë y = sin(x) l√†:",
                            options: ["‚Ñù", "‚Ñù \\ {œÄ/2 + kœÄ}", "[-1; 1]", "[0; 2œÄ]"],
                            correct: 0
                        },
                        {
                            question: "Chu k·ª≥ c·ªßa h√†m s·ªë y = cos(x) l√†:",
                            options: ["œÄ", "2œÄ", "œÄ/2", "4œÄ"],
                            correct: 1
                        },
                        {
                            question: "H√†m s·ªë y = tan(x) c√≥ t·∫≠p x√°c ƒë·ªãnh l√†:",
                            options: ["‚Ñù", "‚Ñù \\ {kœÄ}", "‚Ñù \\ {œÄ/2 + kœÄ}", "[-1; 1]"],
                            correct: 2
                        },
                        {
                            question: "T·∫≠p gi√° tr·ªã c·ªßa h√†m s·ªë y = sin(x) l√†:",
                            options: ["‚Ñù", "[-1; 1]", "[0; 1]", "[-œÄ; œÄ]"],
                            correct: 1
                        },
                        {
                            question: "H√†m s·ªë y = cos(x) l√† h√†m s·ªë:",
                            options: ["Ch·∫µn", "L·∫ª", "Kh√¥ng ch·∫µn kh√¥ng l·∫ª", "V·ª´a ch·∫µn v·ª´a l·∫ª"],
                            correct: 0
                        }
                    ],
                    [
                        {
                            question: "T·∫≠p gi√° tr·ªã c·ªßa h√†m s·ªë y = 2sin(x) + 1 l√†:",
                            options: ["[-1; 3]", "[-2; 2]", "[-1; 1]", "[1; 3]"],
                            correct: 0
                        },
                        {
                            question: "Chu k·ª≥ c·ªßa h√†m s·ªë y = sin(2x) l√†:",
                            options: ["2œÄ", "œÄ", "œÄ/2", "4œÄ"],
                            correct: 1
                        },
                        {
                            question: "H√†m s·ªë y = cot(x) c√≥ chu k·ª≥ l√†:",
                            options: ["2œÄ", "œÄ", "œÄ/2", "4œÄ"],
                            correct: 1
                        },
                        {
                            question: "ƒê·ªì th·ªã h√†m s·ªë y = sin(x) ƒëi qua ƒëi·ªÉm n√†o sau ƒë√¢y?",
                            options: ["(0; 1)", "(œÄ/2; 1)", "(œÄ; 1)", "(3œÄ/2; 1)"],
                            correct: 1
                        },
                        {
                            question: "H√†m s·ªë y = sin(x) l√† h√†m s·ªë:",
                            options: ["Ch·∫µn", "L·∫ª", "Kh√¥ng ch·∫µn kh√¥ng l·∫ª", "V·ª´a ch·∫µn v·ª´a l·∫ª"],
                            correct: 1
                        }
                    ]
                ]
            },
            // Round 2: Sorting - C√°c b∆∞·ªõc x√°c ƒë·ªãnh t√≠nh ch·∫•t h√†m s·ªë l∆∞·ª£ng gi√°c
            {
                type: 'sorting',
                questionSets: [
                    [
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc x√°c ƒë·ªãnh t√≠nh ch·∫•t h√†m s·ªë y = sin(x):",
                            items: [
                                "X√°c ƒë·ªãnh t·∫≠p x√°c ƒë·ªãnh: D = ‚Ñù",
                                "X√°c ƒë·ªãnh t·∫≠p gi√° tr·ªã: T = [-1; 1]",
                                "X√©t t√≠nh ch·∫µn l·∫ª: sin(-x) = -sin(x) (h√†m l·∫ª)",
                                "X√°c ƒë·ªãnh chu k·ª≥: T = 2œÄ"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m t·∫≠p gi√° tr·ªã c·ªßa y = 3sin(x) - 2:",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = 3sin(x) - 2",
                                "T√¨m t·∫≠p gi√° tr·ªã c·ªßa sin(x): [-1; 1]",
                                "Nh√¢n v·ªõi 3: 3sin(x) ‚àà [-3; 3]",
                                "Tr·ª´ 2: y ‚àà [-5; 1]"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc x√©t t√≠nh ch·∫µn l·∫ª c·ªßa y = cos(x):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = cos(x)",
                                "Ki·ªÉm tra t·∫≠p x√°c ƒë·ªãnh: D = ‚Ñù ƒë·ªëi x·ª©ng qua g·ªëc",
                                "T√≠nh cos(-x) = cos(x)",
                                "K·∫øt lu·∫≠n: h√†m s·ªë ch·∫µn"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m chu k·ª≥ c·ªßa y = sin(3x):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = sin(3x)",
                                "Nh·∫≠n d·∫°ng d·∫°ng y = sin(ax) v·ªõi a = 3",
                                "√Åp d·ª•ng c√¥ng th·ª©c T = 2œÄ/|a|",
                                "K·∫øt lu·∫≠n: T = 2œÄ/3"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m t·∫≠p x√°c ƒë·ªãnh c·ªßa y = tan(x):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = tan(x) = sin(x)/cos(x)",
                                "ƒêi·ªÅu ki·ªán x√°c ƒë·ªãnh: cos(x) ‚â† 0",
                                "Gi·∫£i ph∆∞∆°ng tr√¨nh: cos(x) = 0 ‚ü∫ x = œÄ/2 + kœÄ",
                                "K·∫øt lu·∫≠n: D = ‚Ñù \\ {œÄ/2 + kœÄ, k ‚àà ‚Ñ§}"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        }
                    ],
                    [
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc x√°c ƒë·ªãnh t√≠nh ch·∫•t h√†m s·ªë y = cos(x):",
                            items: [
                                "X√°c ƒë·ªãnh t·∫≠p x√°c ƒë·ªãnh: D = ‚Ñù",
                                "X√°c ƒë·ªãnh t·∫≠p gi√° tr·ªã: T = [-1; 1]",
                                "X√©t t√≠nh ch·∫µn l·∫ª: cos(-x) = cos(x) (h√†m ch·∫µn)",
                                "X√°c ƒë·ªãnh chu k·ª≥: T = 2œÄ"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m t·∫≠p gi√° tr·ªã c·ªßa y = -2cos(x) + 3:",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = -2cos(x) + 3",
                                "T√¨m t·∫≠p gi√° tr·ªã c·ªßa cos(x): [-1; 1]",
                                "Nh√¢n v·ªõi -2: -2cos(x) ‚àà [-2; 2]",
                                "C·ªông 3: y ‚àà [1; 5]"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc x√©t t√≠nh ch·∫µn l·∫ª c·ªßa y = tan(x):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = tan(x)",
                                "Ki·ªÉm tra t·∫≠p x√°c ƒë·ªãnh ƒë·ªëi x·ª©ng qua g·ªëc",
                                "T√≠nh tan(-x) = -tan(x)",
                                "K·∫øt lu·∫≠n: h√†m s·ªë l·∫ª"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m chu k·ª≥ c·ªßa y = cos(x/2):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = cos(x/2)",
                                "Nh·∫≠n d·∫°ng d·∫°ng y = cos(ax) v·ªõi a = 1/2",
                                "√Åp d·ª•ng c√¥ng th·ª©c T = 2œÄ/|a|",
                                "K·∫øt lu·∫≠n: T = 2œÄ/(1/2) = 4œÄ"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        },
                        {
                            question: "S·∫Øp x·∫øp c√°c b∆∞·ªõc t√¨m t·∫≠p x√°c ƒë·ªãnh c·ªßa y = cot(x):",
                            items: [
                                "X√°c ƒë·ªãnh h√†m s·ªë y = cot(x) = cos(x)/sin(x)",
                                "ƒêi·ªÅu ki·ªán x√°c ƒë·ªãnh: sin(x) ‚â† 0",
                                "Gi·∫£i ph∆∞∆°ng tr√¨nh: sin(x) = 0 ‚ü∫ x = kœÄ",
                                "K·∫øt lu·∫≠n: D = ‚Ñù \\ {kœÄ, k ‚àà ‚Ñ§}"
                            ],
                            correctOrder: [0, 1, 2, 3]
                        }
                    ]
                ]
            },
            // Round 3: Drag and Drop - Ho√†n th√†nh c√¥ng th·ª©c v√† t√≠nh ch·∫•t
            {
                type: 'dragdrop',
                questionSets: [
                    [
                        {
                            question: "Ho√†n th√†nh c√¥ng th·ª©c chu k·ª≥ c·ªßa h√†m s·ªë y = sin(ax + b):",
                            equation: "T = ___",
                            dragItems: ["2œÄ/|a|", "œÄ/|a|", "2œÄ|a|", "œÄ|a|"],
                            correctAnswers: ["2œÄ/|a|"]
                        },
                        {
                            question: "Ho√†n th√†nh t·∫≠p gi√° tr·ªã c·ªßa h√†m s·ªë y = A¬∑sin(x) + B:",
                            equation: "T = [___ ; ___]",
                            dragItems: ["B-|A|", "B+|A|", "A-B", "A+B"],
                            correctAnswers: ["B-|A|", "B+|A|"]
                        },
                        {
                            question: "Ho√†n th√†nh ƒëi·ªÅu ki·ªán x√°c ƒë·ªãnh c·ªßa y = tan(ax + b):",
                            equation: "ax + b ‚â† ___ + ___",
                            dragItems: ["œÄ/2", "kœÄ", "œÄ", "k2œÄ"],
                            correctAnswers: ["œÄ/2", "kœÄ"]
                        },
                        {
                            question: "Ho√†n th√†nh chu k·ª≥ c·ªßa h√†m s·ªë y = tan(2x):",
                            equation: "T = ___",
                            dragItems: ["œÄ/2", "œÄ", "2œÄ", "œÄ/4"],
                            correctAnswers: ["œÄ/2"]
                        },
                        {
                            question: "Ho√†n th√†nh t√≠nh ch·∫•t ƒë·ªëi x·ª©ng c·ªßa y = sin(x):",
                            equation: "sin(-x) = ___",
                            dragItems: ["-sin(x)", "sin(x)", "cos(x)", "-cos(x)"],
                            correctAnswers: ["-sin(x)"]
                        }
                    ],
                    [
                        {
                            question: "Ho√†n th√†nh c√¥ng th·ª©c chu k·ª≥ c·ªßa h√†m s·ªë y = cos(bx):",
                            equation: "T = ___",
                            dragItems: ["2œÄ/|b|", "œÄ/|b|", "2œÄ|b|", "œÄ|b|"],
                            correctAnswers: ["2œÄ/|b|"]
                        },
                        {
                            question: "Ho√†n th√†nh t·∫≠p gi√° tr·ªã c·ªßa h√†m s·ªë y = 3cos(x) - 1:",
                            equation: "T = [___ ; ___]",
                            dragItems: ["-4", "2", "-1", "3"],
                            correctAnswers: ["-4", "2"]
                        },
                        {
                            question: "Ho√†n th√†nh ƒëi·ªÅu ki·ªán x√°c ƒë·ªãnh c·ªßa y = cot(x/3):",
                            equation: "x/3 ‚â† ___",
                            dragItems: ["kœÄ", "kœÄ/3", "k3œÄ", "œÄ/3"],
                            correctAnswers: ["kœÄ"]
                        },
                        {
                            question: "Ho√†n th√†nh chu k·ª≥ c·ªßa h√†m s·ªë y = cot(x/2):",
                            equation: "T = ___",
                            dragItems: ["2œÄ", "œÄ", "œÄ/2", "4œÄ"],
                            correctAnswers: ["2œÄ"]
                        },
                        {
                            question: "Ho√†n th√†nh t√≠nh ch·∫•t ƒë·ªëi x·ª©ng c·ªßa y = cos(x):",
                            equation: "cos(-x) = ___",
                            dragItems: ["cos(x)", "-cos(x)", "sin(x)", "-sin(x)"],
                            correctAnswers: ["cos(x)"]
                        }
                    ]
                ]
            }
        ];

        // Generate questions for current game
        function generateQuestions() {
            const rounds = [];
            for (let i = 0; i < 3; i++) {
                const questionSet = questionBank[i].questionSets[Math.floor(Math.random() * questionBank[i].questionSets.length)];
                rounds.push({
                    type: questionBank[i].type,
                    questions: questionSet
                });
            }
            return rounds;
        }

        let rounds = [];

        function startGame() {
            playClickSound();
            
            const nameInput = document.getElementById('playerName');
            playerName = nameInput.value.trim();
            
            if (!playerName) {
                alert('Vui l√≤ng nh·∫≠p t√™n c·ªßa b·∫°n!');
                return;
            }
            
            // Generate new questions for this game
            rounds = generateQuestions();
            
            // Start total timer
            startTotalTimer();
            
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('questionArea').classList.remove('hidden');
            loadQuestion();
        }

        // Leaderboard management
        function getLeaderboard() {
            const saved = localStorage.getItem('trigonometryFunctionLeaderboard');
            return saved ? JSON.parse(saved) : [];
        }

        function saveToLeaderboard(name, score) {
            const leaderboard = getLeaderboard();
            const now = new Date();
            
            leaderboard.push({
                name: name,
                score: score,
                totalTime: totalGameTime,
                avgTime: Math.round(totalGameTime / 15),
                date: now.toLocaleDateString('vi-VN'),
                time: now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })
            });
            
            // Sort by score (descending) and keep top 20
            leaderboard.sort((a, b) => b.score - a.score);
            const topLeaderboard = leaderboard.slice(0, 20);
            
            localStorage.setItem('trigonometryFunctionLeaderboard', JSON.stringify(topLeaderboard));
            return topLeaderboard;
        }

        function showLeaderboard() {
            playClickSound();
            
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('finalScore').classList.add('hidden');
            document.getElementById('leaderboard').classList.remove('hidden');
            
            const leaderboard = getLeaderboard();
            const listContainer = document.getElementById('leaderboardList');
            
            if (leaderboard.length === 0) {
                listContainer.innerHTML = '<div class="text-center text-gray-500 py-8">Ch∆∞a c√≥ h·ªçc sinh n√†o. H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n!</div>';
                return;
            }
            
            listContainer.innerHTML = leaderboard.map((player, index) => {
                const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : 'bg-gray-50';
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `#${index + 1}`;
                
                return `
                    <div class="leaderboard-item ${rankClass} rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="text-2xl font-bold">${medal}</div>
                            <div>
                                <div class="font-bold text-lg">${player.name}</div>
                                <div class="text-sm text-gray-600">${player.date} l√∫c ${player.time}</div>
                                <div class="text-sm text-blue-600">‚è±Ô∏è ${formatTime(player.totalTime || 0)} (TB: ${player.avgTime || 0}s/c√¢u)</div>
                            </div>
                        </div>
                        <div class="text-2xl font-bold text-purple-800">${player.score}/150</div>
                    </div>
                `;
            }).join('');
        }

        function hideLeaderboard() {
            playClickSound();
            document.getElementById('leaderboard').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
        }

        function clearLeaderboard() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô b·∫£ng x·∫øp h·∫°ng?')) {
                localStorage.removeItem('trigonometryFunctionLeaderboard');
                showLeaderboard();
                playClickSound();
            }
        }

        function loadQuestion() {
            const roundData = rounds[currentRound - 1];
            currentQuestionData = roundData.questions[currentQuestion - 1];
            
            updateUI();
            
            // Reset and start question timer
            stopQuestionTimer();
            startQuestionTimer();
            
            // Reset timer display color
            const timerElement = document.getElementById('questionTimer').parentElement;
            timerElement.className = 'bg-purple-100 px-4 py-2 rounded-full';
            timerElement.querySelector('span').className = 'text-purple-800 font-semibold';
            
            // Hide all game types
            document.getElementById('multipleChoice').classList.add('hidden');
            document.getElementById('sortingGame').classList.add('hidden');
            document.getElementById('dragDropGame').classList.add('hidden');
            
            // Show appropriate game type
            if (roundData.type === 'multiple') {
                showMultipleChoice();
            } else if (roundData.type === 'sorting') {
                showSortingGame();
            } else if (roundData.type === 'dragdrop') {
                showDragDropGame();
            }
        }

        function updateUI() {
            document.getElementById('currentRound').textContent = currentRound;
            document.getElementById('currentQuestion').textContent = currentQuestion;
            document.getElementById('score').textContent = score;
            
            const progress = ((currentRound - 1) * 5 + currentQuestion - 1) / 15 * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function showMultipleChoice() {
            document.getElementById('questionTitle').textContent = `C√¢u ${currentQuestion}: Tr·∫Øc Nghi·ªám`;
            document.getElementById('questionContent').textContent = currentQuestionData.question;
            document.getElementById('multipleChoice').classList.remove('hidden');
            
            const options = document.querySelectorAll('.option-btn span:last-child');
            options.forEach((option, index) => {
                option.textContent = currentQuestionData.options[index];
            });
        }

        function selectAnswer(answerIndex) {
            playClickSound();
            
            const isCorrect = answerIndex === currentQuestionData.correct;
            if (isCorrect) {
                score += 10;
                playCorrectSound();
            } else {
                playWrongSound();
            }
            
            showResult(isCorrect, isCorrect ? "Ch√≠nh x√°c! üéâ" : "Ch∆∞a ƒë√∫ng! üòÖ", 
                      isCorrect ? "B·∫°n ƒë√£ ch·ªçn ƒë√°p √°n ƒë√∫ng!" : `ƒê√°p √°n ƒë√∫ng l√†: ${currentQuestionData.options[currentQuestionData.correct]}`);
        }

        function showSortingGame() {
            document.getElementById('questionTitle').textContent = `C√¢u ${currentQuestion}: S·∫Øp X·∫øp`;
            document.getElementById('questionContent').textContent = currentQuestionData.question;
            document.getElementById('sortingGame').classList.remove('hidden');
            
            const container = document.getElementById('sortableItems');
            container.innerHTML = '';
            
            // Shuffle items
            const shuffledItems = [...currentQuestionData.items].sort(() => Math.random() - 0.5);
            
            shuffledItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'drag-item bg-blue-50 border-2 border-blue-200 rounded-xl p-4 cursor-move hover:bg-blue-100 transition-all duration-300';
                div.draggable = true;
                div.textContent = `${index + 1}. ${item}`;
                div.dataset.originalIndex = currentQuestionData.items.indexOf(item);
                
                div.addEventListener('dragstart', handleDragStart);
                div.addEventListener('dragover', handleDragOver);
                div.addEventListener('drop', handleDrop);
                div.addEventListener('dragend', handleDragEnd);
                
                container.appendChild(div);
            });
        }

        let draggedElement = null;

        function handleDragStart(e) {
            draggedElement = this;
            this.style.opacity = '0.5';
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            if (this !== draggedElement) {
                const container = this.parentNode;
                const allItems = [...container.children];
                const draggedIndex = allItems.indexOf(draggedElement);
                const targetIndex = allItems.indexOf(this);
                
                if (draggedIndex < targetIndex) {
                    container.insertBefore(draggedElement, this.nextSibling);
                } else {
                    container.insertBefore(draggedElement, this);
                }
                
                // Update numbering
                [...container.children].forEach((item, index) => {
                    const text = item.textContent.substring(item.textContent.indexOf('.') + 2);
                    item.textContent = `${index + 1}. ${text}`;
                });
            }
        }

        function handleDragEnd(e) {
            this.style.opacity = '1';
            draggedElement = null;
        }

        function checkSortOrder() {
            playClickSound();
            
            const items = document.querySelectorAll('#sortableItems .drag-item');
            const currentOrder = Array.from(items).map(item => parseInt(item.dataset.originalIndex));
            const isCorrect = JSON.stringify(currentOrder) === JSON.stringify(currentQuestionData.correctOrder);
            
            if (isCorrect) {
                score += 10;
                playCorrectSound();
            } else {
                playWrongSound();
            }
            
            showResult(isCorrect, isCorrect ? "S·∫Øp x·∫øp ch√≠nh x√°c! üéØ" : "Th·ª© t·ª± ch∆∞a ƒë√∫ng! ü§î", 
                      isCorrect ? "B·∫°n ƒë√£ s·∫Øp x·∫øp ƒë√∫ng th·ª© t·ª± c√°c b∆∞·ªõc!" : "H√£y xem l·∫°i th·ª© t·ª± logic c·ªßa c√°c b∆∞·ªõc.");
        }

        function showDragDropGame() {
            document.getElementById('questionTitle').textContent = `C√¢u ${currentQuestion}: K√©o Th·∫£`;
            document.getElementById('questionContent').textContent = currentQuestionData.question;
            document.getElementById('dragDropGame').classList.remove('hidden');
            
            // Setup drag items
            const dragContainer = document.getElementById('dragItems');
            dragContainer.innerHTML = '';
            
            currentQuestionData.dragItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'drag-item bg-green-50 border-2 border-green-200 rounded-xl p-3 text-center cursor-move hover:bg-green-100 transition-all duration-300';
                div.draggable = true;
                div.textContent = item;
                div.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item);
                });
                dragContainer.appendChild(div);
            });
            
            // Setup drop zones
            const dropContainer = document.getElementById('dropZones');
            dropContainer.innerHTML = '';
            
            const equation = currentQuestionData.equation;
            const parts = equation.split('___');
            
            parts.forEach((part, index) => {
                const div = document.createElement('div');
                div.className = 'flex items-center space-x-2';
                
                if (part.trim()) {
                    const textSpan = document.createElement('span');
                    textSpan.textContent = part;
                    textSpan.className = 'text-lg';
                    div.appendChild(textSpan);
                }
                
                if (index < parts.length - 1) {
                    const dropZone = document.createElement('div');
                    dropZone.className = 'drop-zone border-2 border-dashed border-purple-300 rounded-xl p-3 bg-purple-50 text-center min-w-20';
                    dropZone.textContent = '?';
                    dropZone.dataset.index = index;
                    
                    dropZone.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        dropZone.classList.add('drag-over');
                    });
                    
                    dropZone.addEventListener('dragleave', () => {
                        dropZone.classList.remove('drag-over');
                    });
                    
                    dropZone.addEventListener('drop', (e) => {
                        e.preventDefault();
                        const data = e.dataTransfer.getData('text/plain');
                        dropZone.textContent = data;
                        dropZone.classList.remove('drag-over');
                        dropZone.classList.add('bg-purple-100', 'border-purple-400');
                    });
                    
                    div.appendChild(dropZone);
                }
                
                dropContainer.appendChild(div);
            });
        }

        function checkDragDrop() {
            playClickSound();
            
            const dropZones = document.querySelectorAll('.drop-zone');
            const answers = Array.from(dropZones).map(zone => zone.textContent.trim());
            const correctAnswers = currentQuestionData.correctAnswers;
            
            let isCorrect = true;
            for (let i = 0; i < correctAnswers.length; i++) {
                if (answers[i] !== correctAnswers[i]) {
                    isCorrect = false;
                    break;
                }
            }
            
            if (isCorrect) {
                score += 10;
                playCorrectSound();
            } else {
                playWrongSound();
            }
            
            showResult(isCorrect, isCorrect ? "K√©o th·∫£ ch√≠nh x√°c! üé™" : "Ch∆∞a ƒë√∫ng v·ªã tr√≠! üé≠", 
                      isCorrect ? "B·∫°n ƒë√£ ƒëi·ªÅn ƒë√∫ng t·∫•t c·∫£ c√°c gi√° tr·ªã!" : `ƒê√°p √°n ƒë√∫ng: ${correctAnswers.join(', ')}`);
        }

        function showResult(isCorrect, title, message) {
            // Stop question timer
            stopQuestionTimer();
            
            document.getElementById('questionArea').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            document.getElementById('resultIcon').textContent = isCorrect ? 'üéâ' : 'üòÖ';
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultMessage').textContent = message;
            
            if (isCorrect) {
                document.getElementById('resultScreen').classList.add('correct-answer');
                setTimeout(() => {
                    document.getElementById('resultScreen').classList.remove('correct-answer');
                }, 600);
            } else {
                document.getElementById('resultScreen').classList.add('wrong-answer');
                setTimeout(() => {
                    document.getElementById('resultScreen').classList.remove('wrong-answer');
                }, 600);
            }
            
            updateUI();
        }

        function nextQuestion() {
            playClickSound();
            document.getElementById('resultScreen').classList.add('hidden');
            
            if (currentQuestion < 5) {
                currentQuestion++;
                document.getElementById('questionArea').classList.remove('hidden');
                loadQuestion();
            } else if (currentRound < 3) {
                currentRound++;
                currentQuestion = 1;
                document.getElementById('questionArea').classList.remove('hidden');
                loadQuestion();
            } else {
                showFinalScore();
            }
        }

        function showFinalScore() {
            // Stop total timer
            stopTotalTimer();
            
            document.getElementById('finalScore').classList.remove('hidden');
            document.getElementById('finalScoreValue').textContent = score;
            document.getElementById('finalPlayerName').textContent = playerName;
            
            // Display time information
            document.getElementById('finalTotalTime').textContent = formatTime(totalGameTime);
            document.getElementById('avgTimePerQuestion').textContent = Math.round(totalGameTime / 15);
            
            let message = "";
            if (score >= 130) {
                message = "Xu·∫•t s·∫Øc! B·∫°n l√† b·∫≠c th·∫ßy h√†m s·ªë l∆∞·ª£ng gi√°c! üèÜ";
            } else if (score >= 100) {
                message = "R·∫•t t·ªët! B·∫°n ƒë√£ n·∫Øm v·ªØng ki·∫øn th·ª©c! üåü";
            } else if (score >= 70) {
                message = "Kh√° t·ªët! H√£y √¥n t·∫≠p th√™m nh√©! üí™";
            } else {
                message = "C·∫ßn c·ªë g·∫Øng h∆°n! ƒê·ª´ng b·ªè cu·ªôc! üöÄ";
            }
            
            document.getElementById('finalMessage').textContent = message;
            
            // Save to leaderboard and show rank
            const leaderboard = saveToLeaderboard(playerName, score);
            const playerRank = leaderboard.findIndex(player => player.name === playerName && player.score === score) + 1;
            
            let rankMessage = "";
            if (playerRank === 1) {
                rankMessage = "ü•á B·∫°n ƒëang d·∫´n ƒë·∫ßu b·∫£ng x·∫øp h·∫°ng!";
                playCorrectSound();
                setTimeout(() => playCorrectSound(), 300);
                setTimeout(() => playCorrectSound(), 600);
            } else if (playerRank <= 3) {
                rankMessage = `üèÜ B·∫°n ƒëang ·ªü v·ªã tr√≠ th·ª© ${playerRank} trong b·∫£ng x·∫øp h·∫°ng!`;
                playCorrectSound();
            } else if (playerRank <= 10) {
                rankMessage = `‚≠ê B·∫°n ƒëang ·ªü v·ªã tr√≠ th·ª© ${playerRank} trong top 10!`;
            } else {
                rankMessage = `üìä B·∫°n ƒëang ·ªü v·ªã tr√≠ th·ª© ${playerRank} trong b·∫£ng x·∫øp h·∫°ng.`;
            }
            
            document.getElementById('rankMessage').textContent = rankMessage;
        }

        function restartGame() {
            playClickSound();
            
            // Reset all variables
            currentRound = 1;
            currentQuestion = 1;
            score = 0;
            playerName = '';
            totalGameTime = 0;
            questionTimeLeft = 60;
            
            // Stop all timers
            stopQuestionTimer();
            stopTotalTimer();
            
            document.getElementById('finalScore').classList.add('hidden');
            document.getElementById('leaderboard').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('playerName').value = '';
            
            // Reset timer displays
            document.getElementById('questionTimer').textContent = '60';
            document.getElementById('totalTimer').textContent = '00:00';
            
            updateUI();
        }

        // Initialize audio context on first user interaction
        document.addEventListener('click', function initAudio() {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            document.removeEventListener('click', initAudio);
        }, { once: true });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96bc03085066daa5',t:'MTc1NDYyNDYzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
